# AI Analytics Workspace - Copilot Instructions

## Project Overview
This is a Next.js application that provides AI-powered analytics and visualization for Excel data. Users can upload Excel files, get automated insights, and generate interactive charts with AI explanations.

## Tech Stack
- **Framework**: Next.js 14+ with App Router
- **Language**: TypeScript
- **UI**: React with Tailwind CSS
- **Charts**: Chart.js with react-chartjs-2
- **File Processing**: Excel parsing capabilities
- **AI Features**: Automated data analysis and chart explanations

## Architecture

### Core Components
- `Workspace.tsx` - Main dashboard component handling file upload, analytics, and chart generation
- `FileUpload.tsx` - Handles Excel file upload and parsing
- `DataTable.tsx` - Displays parsed data in tabular format
- Chart components (`BarChart.tsx`, `LineChart.tsx`, `PieChart.tsx`) - Visualization components

### Key Services
- `ai-service.ts` - Core AI functionality for data analysis and chart explanations
- `excel-parser.ts` - Excel file parsing utilities
- API routes for analytics and chart generation

## Code Style Guidelines

### TypeScript
- Use strict TypeScript with proper type definitions
- Define interfaces for all data structures
- Use type imports when importing types only
- Prefer `interface` over `type` for object shapes

### React Components
- Use functional components with hooks
- Implement proper error boundaries
- Use `useState` and `useEffect` appropriately
- Keep components focused and single-responsibility

### Styling
- Use Tailwind CSS classes consistently
- Follow the existing color scheme (blue primary, green success, purple accent)
- Maintain responsive design patterns
- Use the established card-based layout system

## Key Features to Maintain

### AI-Powered Analytics
- Automatic data type detection (numeric, text, date columns)
- Statistical analysis generation
- Smart recommendations for visualizations
- Chart explanations with key findings and insights

### Chart Generation
- Support for bar, line, and pie charts
- Dynamic chart data generation
- AI explanations for each chart
- Chart management (add/remove functionality)

### User Experience
- Loading states for all async operations
- Error handling and user feedback
- Responsive design for mobile and desktop
- Intuitive file upload process

## Development Guidelines

### When Adding New Features
1. **Data Analysis**: Extend `ai-service.ts` for new analytical capabilities
2. **Visualizations**: Create new chart components following existing patterns
3. **UI Components**: Use the established design system and component structure
4. **API Routes**: Follow RESTful patterns for new endpoints

### Code Quality Standards
- Write descriptive variable and function names
- Add JSDoc comments for complex functions
- Handle edge cases and error scenarios
- Maintain consistent indentation and formatting

### Performance Considerations
- Optimize large dataset handling
- Implement proper loading states
- Use React.memo for expensive components when needed
- Minimize re-renders in chart components

## Common Patterns

### State Management
```typescript
const [data, setData] = useState<ParsedData | null>(null);
const [loading, setLoading] = useState(false);
```

### API Calls
```typescript
const response = await fetch("/api/endpoint", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify(payload),
});
const result = await response.json();
```

### Chart Configuration
```typescript
interface ChartConfig {
  id: string;
  type: string;
  data: ChartData;
  title: string;
  explanation?: ChartExplanation;
}
```

## AI Service Patterns

### Data Analysis
- Always categorize columns by type (numeric, text, date)
- Generate meaningful statistics for each column type
- Provide actionable recommendations based on data patterns

### Chart Explanations
- Include key findings, insights, and recommendations
- Use statistical analysis to support findings
- Provide business-relevant interpretations

## Testing Considerations
- Test with various Excel file formats
- Validate chart generation with different data types
- Ensure AI explanations are meaningful and accurate
- Test responsive design across devices

## Security Guidelines
- Validate all file uploads
- Sanitize user inputs
- Handle sensitive data appropriately
- Implement proper error handling without exposing internals

## Accessibility
- Ensure proper ARIA labels for charts
- Maintain keyboard navigation support
- Use semantic HTML elements
- Provide alternative text for visual elements

## Future Enhancements to Consider
- Additional chart types (scatter, histogram, etc.)
- Export functionality for charts and reports
- Advanced filtering and data manipulation
- Real-time collaboration features
- Integration with external data sources

## Debugging Tips
- Check browser console for chart rendering issues
- Validate data structure before chart generation
- Use React DevTools for component state inspection
- Monitor network requests for API debugging

Remember to maintain the existing code quality and user experience standards when making modifications or additions to the codebase.